<!DOCTYPE html>
<html lang="th">
<head>
  <script>console.log('HTML is being read!');</script>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://unpkg.com https://maps.googleapis.com https://maps.gstatic.com;
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com https://cdn.jsdelivr.net;
    img-src 'self' data: https://maps.googleapis.com https://maps.gstatic.com https://maps.google.com https://*.googleusercontent.com https://places.googleapis.com;
    connect-src 'self' https://maps.googleapis.com https://maps.gstatic.com https://places.googleapis.com;
    font-src 'self' https://fonts.gstatic.com https://unpkg.com;
    frame-src https://www.google.com;
  ">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tiew Thai — Planner</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
  <link rel="stylesheet" href="./public/styles/base.css" />
  <link rel="stylesheet" href="./public/styles/main.css" />
</head>
  <div class="page-container">
    <div class="wrapper">
      <header class="header">
        <div class="logo">
          <input type="text" id="trip-name-input" value="Untitled Plan" />
        </div>
        <span id="save-status"></span>
        <div class="nav-links">
          <a href="#" id="new-plan-btn">New Plan</a>
          <a href="#" id="save-plan-btn">Save</a>
          <a href="./my-plans.html">My Plans</a>
          <a href="#" id="recommend-btn">Recommend Places</a>
        </div>
      </header>
      <div class="container">
        <div class="sidebar" id="sidebar-container">
          <div class="sidebar-top">
            <h3>Itinerary</h3>
            <ul class="menu" id="itinerary-list"></ul>
          </div>
          <div id="day-controls">
            <button id="add-date-btn">Add Date</button>
            <input id="date-range-picker" placeholder="Select travel dates" style="display:none;" />
          </div>
          <div class="sidebar-bottom">
            <p class="username">Logged in as: <strong>Guest</strong></p>
            <button class="logout-btn">Logout</button>
          </div>
        </div>
        <div class="main-content" id="main-content"></div>
      </div>
    </div>
    <div class="map-container">
      <div id="map"></div>
      <div id="place-details-panel" class="place-details-panel"></div>
    </div>
  </div>

  <div id="day-selection-popup">
    <div class="popup-content">
      <h3>Select a day to add this place to:</h3>
      <ul id="day-list-for-selection"></ul>
      <button id="day-selection-cancel-btn">Cancel</button>
    </div>
  </div>

  <div id="recommend-modal" class="recommend-modal">
    <div class="recommend-content">
      <div class="recommend-header">
        <h3>Recommend Places</h3>
        <button id="recommend-close" title="Close"><i class="bx bx-x"></i></button>
      </div>
      <div class="recommend-body">
          <div class="province-search">
              <label for="province-input">เลือกจังหวัดที่ต้องการ (ได้หลายจังหวัด)</label>
              <div id="province-chips" class="chips-container"></div>
              <div class="input-wrapper">
                  <input id="province-input" placeholder="พิมพ์ชื่อจังหวัด..." autocomplete="off" />
                  <div id="province-suggestions" class="suggestions-list"></div>
              </div>
          </div>
          <div class="recommend-results" id="recommend-results"></div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

  <script type="module" src="./src/pages/planner/index.js"></script>
  <script type="module" src="./src/recommend/recommend-modal.js"></script>
</body>
</html>